<html>
    <head>
        <!--[if IE]><script language="javascript" type="text/javascript" src="./excanvas.min.js"></script><![endif]-->
        <script language="javascript" type="text/javascript" src="./jquery.js"></script>
        <script language="javascript" type="text/javascript" src="./jquery.flot.js"></script>
    </head>
    <body>

<script>
    $("<div id='tooltip'></div>").css({
                                    position: "absolute",
                                    display: "none",
                                    border: "1px solid #fdd",
                                    padding: "2px",
                                    "background-color": "#fee",
                                    opacity: 0.80
                                  }).appendTo("body");
                
    series_settings = {
        lines: { show: true },
        points: { show: true }
    };

    grid_settings = { tickColor: '#ddd', hoverable: true };

    xaxis_settings = {
        tickFormatter: function(num, obj) { return parseInt(num/1000000) + 'M'; }
    };

    yaxis_runtime_settings = {
        tickFormatter: function(num, obj) { return (+num.toFixed(2)) + ' sec.'; }
    };

    yaxis_memory_settings = {
        tickFormatter: function(num, obj) { return parseInt(num/1024/1024) + 'MiB'; }
    };

    legend_settings = {
        position: 'nw',
        backgroundOpacity: 0
    };

    runtime_settings = {
        series: series_settings,
        grid: grid_settings,
        xaxis: xaxis_settings,
        yaxis: yaxis_runtime_settings,
        legend: legend_settings
    };

    memory_settings = {
        series: series_settings,
        grid: grid_settings,
        xaxis: xaxis_settings,
        yaxis: yaxis_memory_settings,
        legend: legend_settings
    };

    __CHART_DATA_GOES_HERE__
    

    function plot_chart(dataset, chart_container, choices_container, chart_settings) {
        // Set colors
        var color = 0;
        $.each(dataset, function(key, val) {
            val.color = color;
            color++;
        });
        
        // Insert checkboxes 
        $.each(dataset, function(key, val) {
            $(choices_container).append("<br/>" + 
                    "<input type='checkbox' name='" + key +"' checked='checked' id='id" + key + "'></input>" +
                    "<label for='id" + key + "'>" + val.label + "</label>");
        });
        
        $(choices_container).find("input").click(plot_according_to_choices);
        
        function plot_according_to_choices() {
            var data = [];
            $(choices_container).find("input:checked").each(
                function () {
                    var key = $(this).attr("name");
                    if (key && dataset[key]) {
                            data.push(dataset[key]);
                    }
                }
            );

            if (data.length > 0) {
                $.plot(chart_container, data, chart_settings);
                
    
                $(chart_container).bind("plothover", function (event, pos, item) {
                    if (item) {
                        var x = item.datapoint[0];
                        var y = item.datapoint[1].toFixed(2);

                        $("#tooltip").html(y + " ; " + x)
                                     .css({top: item.pageY+5, left: item.pageX+5})
                                     .fadeIn(200);
                    } else {
                        $("#tooltip").hide();
                    }        
                });
            }
        }

        plot_according_to_choices()
    }

    $(function () {
        plot_chart(chart_data['sequential-runtime'], '#sequential-runtime', '#sequential-runtime-choices', runtime_settings);
        plot_chart(chart_data['sequentialread-runtime'], '#sequentialread-runtime', '#sequentialread-runtime-choices', runtime_settings);
        plot_chart(chart_data['randomshufflerange-runtime'], '#randomshufflerange-runtime', '#randomshufflerange-runtime-choices', runtime_settings);
        plot_chart(chart_data['randomshufflerangeread-runtime'], '#randomshufflerangeread-runtime', '#randomshufflerangeread-runtime-choices', runtime_settings);
        plot_chart(chart_data['randomfull-runtime'], '#randomfull-runtime', '#randomfull-runtime-choices', runtime_settings);
        plot_chart(chart_data['randomfullread-runtime'], '#randomfullread-runtime', '#randomfullread-runtime-choices', runtime_settings);
        plot_chart(chart_data['iteration-runtime'], '#iteration-runtime', '#iteration-runtime-choices', runtime_settings);
        plot_chart(chart_data['delete-runtime'], '#delete-runtime', '#delete-runtime-choices', runtime_settings);
        plot_chart(chart_data['randomfull-memory'], '#randomfull-memory', '#randomfull-memory-choices', memory_settings);
        plot_chart(chart_data['insertstring-runtime'], '#insertstring-runtime', '#insertstring-runtime-choices', runtime_settings);
        plot_chart(chart_data['readstring-runtime'], '#readstring-runtime', '#readstring-runtime-choices', runtime_settings);
        plot_chart(chart_data['deletestring-runtime'], '#deletestring-runtime', '#deletestring-runtime-choices', runtime_settings);
        plot_chart(chart_data['insertstring-memory'], '#insertstring-memory', '#insertstring-memory-choices', memory_settings);
    });
    
       
    
</script>

<style>
    body, * { font-family: sans-serif; }
    div.chart {
        float: left;
        width: 700px;
        height: 230px;
    }
    div.choices {
        float: left;
    }
    div.xaxis-title {
        width: 700px;
        text-align: center;
        font-style: italic;
        font-size: small;
        color: #666;
    }
</style>



<h3>Sequential inserts: execution time (integers)</h3>
<div class="chart" id="sequential-runtime"></div>
<div class="choices" id="sequential-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Random shuffle inserts: execution time (integers)</h3>
<div class="chart" id="randomshufflerange-runtime"></div>
<div class="choices" id="randomshufflerange-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Random full inserts: execution yime (integers)</h3>
<div class="chart" id="randomfull-runtime"></div>
<div class="choices" id="randomfull-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>



<h3>Deletes: execution time (integers)</h3>
<div class="chart" id="delete-runtime"></div>
<div class="choices" id="delete-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>



<h3>Sequential reads: execution time (integers)</h3>
<div class="chart" id="sequentialread-runtime"></div>
<div class="choices" id="sequentialread-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Random shuffle reads: execution time (integers)</h3>
<div class="chart" id="randomshufflerangeread-runtime"></div>
<div class="choices" id="randomshufflerangeread-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Random full reads: execution time (integers)</h3>
<div class="chart" id="randomfullread-runtime"></div>
<div class="choices" id="randomfullread-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Iteration: execution time (integers)</h3>
<div class="chart" id="iteration-runtime"></div>
<div class="choices" id="iteration-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>




<h3>Memory usage of random full inserts (integers)</h3>
<div class="chart" id="randomfull-memory"></div>
<div class="choices" id="randomfull-memory-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>






<h3>Inserts: execution time (strings)</h3>
<div class="chart" id="insertstring-runtime"></div>
<div class="choices" id="insertstring-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Deletes: execution time (strings)</h3>
<div class="chart" id="deletestring-runtime"></div>
<div class="choices" id="deletestring-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Reads: execution time (strings)</h3>
<div class="chart" id="readstring-runtime"></div>
<div class="choices" id="readstring-runtime-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>

<h3>Memory usage of inserts (strings)</h3>
<div class="chart" id="insertstring-memory"></div>
<div class="choices" id="insertstring-memory-choices"></div>
<div class="xaxis-title">number of entries in hash table</div>


</body>
</html>
